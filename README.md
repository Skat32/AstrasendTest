# Astrasend

Мини сервис реализующий:
1) Полученние сообщения в брокер очередей
2) Сохранение полученного сообщения в БД
3) Отправка сообщения форматированного в xml на внешнее API
4) Сохранение состояния обработки

Реализовано напиание логов посредством ELK стека
БД - PostgreSQL

* все папки с название NP.* условно являются NuGet пакетами, которые должны быть расскатаны в сети компании или(по желанию) выпущены в общий доступ.

## Использование

1) В первую очередь необходимо запустить средства окружения для корректной работы сервиса, для этого необходимо вызвать команду `docker-compose up -d` для папки `Docker` в корне приложения

2) Запустить сам сервис

3) Перейти в браузере по ссылке http://localhost:15672/ login - guest, password - guest

4) Создать сообщение в очередь `InvoicePayment` для Exchange `CUSTOM_HOST.BaseExchange`

5) Для просмотра логов можно заглянуть в консоль выполнения программы или зайти в Elastic по адресу http://localhost:5601/ 
        5.1) В модуле `Management` выбрать `Data Views` далее создать новое data views написать в названии `astrasend-api*`
        5.2) Далее можно перейти в модуль `Analytics` выбрать `Discover`

6) Для просмотра БД использовать хост `localhost:5432` с логингом и паролем `developer`, название БД `astrasend_db`
        6.1) В БД присудствует одна табличка, `operations`